# 面向对象基础

## 1. 核心概念

### 定义
- **面向对象编程(OOP)**：以对象为核心的编程范式
- **对象**：具有状态和行为的实体
- **类**：创建对象的蓝图或模板
- **封装**：将数据和操作数据的方法捆绑在一起

### 关键特性
- **抽象**：隐藏复杂实现，只暴露必要接口
- **封装**：数据保护，控制访问权限
- **继承**：代码复用，建立类之间的关系
- **多态**：同一接口，不同实现

## 2. 语法规则

### 基本语法
```cpp
class 类名 {
访问修饰符:
    // 数据成员（属性）
    数据类型 成员变量;
    
    // 成员函数（方法）
    返回类型 函数名(参数列表);
};
```

### 代码示例
```cpp
#include <iostream>
#include <string>
using namespace std;

// 简单的类定义
class Person {
public:  // 公有访问权限
    // 数据成员
    string name;
    int age;
    
    // 成员函数
    void introduce() {
        cout << "我叫" << name << ", 今年" << age << "岁。" << endl;
    }
    
    void setAge(int newAge) {
        if (newAge > 0 && newAge < 150) {
            age = newAge;
        }
    }
};

int main() {
    // 创建对象
    Person person1;
    
    // 访问公有成员
    person1.name = "张三";
    person1.setAge(25);
    
    // 调用成员函数
    person1.introduce();
    
    // 创建另一个对象
    Person person2;
    person2.name = "李四";
    person2.setAge(30);
    person2.introduce();
    
    return 0;
}
```

### 注意事项
- 类定义以分号结尾
- 访问修饰符控制成员的可访问性
- 对象是类的实例，每个对象有独立的内存空间
- 成员函数可以访问同一对象的所有成员

## 3. 常见用法

### 场景1：简单的银行账户类
```cpp
class BankAccount {
private:  // 私有成员，外部不能直接访问
    string accountNumber;
    double balance;
    
public:
    // 构造函数
    BankAccount(string accNum, double initialBalance) {
        accountNumber = accNum;
        balance = initialBalance;
    }
    
    // 存款方法
    void deposit(double amount) {
        if (amount > 0) {
            balance += amount;
            cout << "存款成功，当前余额: " << balance << endl;
        }
    }
    
    // 取款方法
    bool withdraw(double amount) {
        if (amount > 0 && amount <= balance) {
            balance -= amount;
            cout << "取款成功，当前余额: " << balance << endl;
            return true;
        } else {
            cout << "取款失败，余额不足" << endl;
            return false;
        }
    }
    
    // 查看余额
    double getBalance() {
        return balance;
    }
};
```

### 场景2：学生信息管理系统
```cpp
class Student {
private:
    string name;
    int studentId;
    double gpa;
    
public:
    // 设置学生信息
    void setInfo(string n, int id, double g) {
        name = n;
        studentId = id;
        if (g >= 0 && g <= 4.0) {
            gpa = g;
        }
    }
    
    // 显示学生信息
    void displayInfo() {
        cout << "学生ID: " << studentId << endl;
        cout << "姓名: " << name << endl;
        cout << "GPA: " << gpa << endl;
    }
    
    // 判断是否优秀
    bool isExcellent() {
        return gpa >= 3.5;
    }
};
```

## 4. 易错点/坑

### 错误示例1：忘记类定义的分号
```cpp
class MyClass {
    // 类内容
}  // 错误：缺少分号

int main() {
    MyClass obj;  // 编译错误
    return 0;
}
```
**原因**：C++类定义必须以分号结尾
**修正方案**：
```cpp
class MyClass {
    // 类内容
};  // 正确：添加分号
```

### 错误示例2：直接访问私有成员
```cpp
class MyClass {
private:
    int secret;
};

int main() {
    MyClass obj;
    obj.secret = 10;  // 错误：私有成员不能直接访问
    return 0;
}
```
**原因**：私有成员只能在类内部访问
**修正方案**：
```cpp
class MyClass {
private:
    int secret;
public:
    void setSecret(int value) {
        secret = value;  // 通过公有方法访问
    }
};
```

### 错误示例3：对象未初始化就使用
```cpp
class Person {
public:
    string name;
    void speak() {
        cout << "我叫" << name << endl;  // name可能包含垃圾值
    }
};

int main() {
    Person p;
    p.speak();  // 未定义行为
    return 0;
}
```
**原因**：未初始化的成员变量包含随机值
**修正方案**：
```cpp
class Person {
public:
    string name = "未知";  // 提供默认值
    void speak() {
        cout << "我叫" << name << endl;
    }
};
```

## 5. 拓展补充

### 关联知识点
- **结构体(struct)**：默认公有访问权限的类
- **联合体(union)**：所有成员共享内存的特殊类
- **友元函数**：可以访问私有成员的非成员函数
- **静态成员**：属于类而不是对象的成员

### 进阶延伸
- **设计模式**：面向对象设计的经典解决方案
- **SOLID原则**：面向对象设计的五个基本原则
- **RAII**：资源获取即初始化，C++重要编程习惯
- **移动语义**：C++11引入的对象资源转移机制