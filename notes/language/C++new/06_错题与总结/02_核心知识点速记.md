# 核心知识点速记

## 1. 核心概念
- 定义：整理C++编程中最关键、最常用的核心知识点
- 关键特性：简洁明了、重点突出、便于快速回顾

## 2. 语法规则
- 基本语法：关键语法要点、常用模式、最佳实践
- 代码示例：

### 基础语法速记
```cpp
#include <iostream>
#include <vector>
#include <memory>
#include <algorithm>

// 1. 基本数据类型和变量
void basicTypes() {
    // 基本数据类型
    int integer = 42;
    double floating = 3.14;
    bool boolean = true;
    char character = 'A';
    
    // 自动类型推导 (C++11)
    auto x = 10;           // int
    auto y = 3.14;         // double
    auto name = "C++";     // const char*
}

// 2. 控制结构
void controlStructures() {
    // if-else语句
    int score = 85;
    if (score >= 90) {
        std::cout << "优秀" << std::endl;
    } else if (score >= 60) {
        std::cout << "及格" << std::endl;
    } else {
        std::cout << "不及格" << std::endl;
    }
    
    // 循环语句
    for (int i = 0; i < 5; i++) {
        std::cout << i << " ";
    }
    std::cout << std::endl;
    
    // 范围for循环 (C++11)
    std::vector<int> numbers = {1, 2, 3, 4, 5};
    for (int num : numbers) {
        std::cout << num << " ";
    }
    std::cout << std::endl;
}

// 3. 函数定义和调用
int add(int a, int b) {
    return a + b;
}

double calculateAverage(const std::vector<double>& nums) {
    if (nums.empty()) return 0.0;
    
    double sum = 0.0;
    for (double num : nums) {
        sum += num;
    }
    return sum / nums.size();
}

// 4. 类和对象
class Student {
private:
    std::string name;
    int age;
    
public:
    // 构造函数
    Student(const std::string& n, int a) : name(n), age(a) {}
    
    // 成员函数
    void introduce() const {
        std::cout << "我叫" << name << ", 今年" << age << "岁" << std::endl;
    }
    
    // Getter/Setter
    std::string getName() const { return name; }
    void setAge(int a) { age = a; }
};

// 5. 模板编程
template<typename T>
T max(T a, T b) {
    return (a > b) ? a : b;
}

template<typename T>
class Box {
private:
    T content;
    
public:
    Box(const T& c) : content(c) {}
    T getContent() const { return content; }
};

// 6. 智能指针 (C++11)
void smartPointersDemo() {
    // unique_ptr - 独占所有权
    auto ptr1 = std::make_unique<int>(42);
    
    // shared_ptr - 共享所有权
    auto ptr2 = std::make_shared<std::vector<int>>();
    ptr2->push_back(1);
    ptr2->push_back(2);
    
    // weak_ptr - 不增加引用计数
    std::weak_ptr<std::vector<int>> weakPtr = ptr2;
}

// 7. Lambda表达式 (C++11)
void lambdaDemo() {
    std::vector<int> numbers = {1, 2, 3, 4, 5};
    
    // 基本lambda
    auto square = [](int x) { return x * x; };
    
    // 捕获外部变量
    int factor = 2;
    auto multiply = [factor](int x) { return x * factor; };
    
    // 使用算法和lambda
    std::for_each(numbers.begin(), numbers.end(), 
                 [](int n) { std::cout << n << " "; });
    std::cout << std::endl;
}

// 8. 异常处理
void exceptionHandling() {
    try {
        std::vector<int> vec(5);
        // vec.at(10) = 42;  // 抛出std::out_of_range
        
        int x = 10, y = 0;
        if (y == 0) {
            throw std::runtime_error("除数不能为零");
        }
        int result = x / y;
    }
    catch (const std::out_of_range& e) {
        std::cerr << "范围错误: " << e.what() << std::endl;
    }
    catch (const std::exception& e) {
        std::cerr << "一般错误: " << e.what() << std::endl;
    }
    catch (...) {
        std::cerr << "未知错误" << std::endl;
    }
}

// 9. STL容器和算法
void stlDemo() {
    // 常用容器
    std::vector<int> vec = {3, 1, 4, 1, 5, 9};
    std::map<std::string, int> scores = {{"Alice", 90}, {"Bob", 85}};
    
    // 常用算法
    std::sort(vec.begin(), vec.end());
    auto it = std::find(vec.begin(), vec.end(), 4);
    int count = std::count(vec.begin(), vec.end(), 1);
    
    // 使用算法和lambda
    std::vector<int> evenNumbers;
    std::copy_if(vec.begin(), vec.end(), 
                std::back_inserter(evenNumbers),
                [](int n) { return n % 2 == 0; });
}

// 10. 移动语义 (C++11)
class Resource {
private:
    std::unique_ptr<int[]> data;
    size_t size;
    
public:
    // 移动构造函数
    Resource(Resource&& other) noexcept
        : data(std::move(other.data)), size(other.size) {
        other.size = 0;
    }
    
    // 移动赋值运算符
    Resource& operator=(Resource&& other) noexcept {
        if (this != &other) {
            data = std::move(other.data);
            size = other.size;
            other.size = 0;
        }
        return *this;
    }
};

int main() {
    std::cout << "=== C++核心知识点速记 ===" << std::endl;
    
    basicTypes();
    controlStructures();
    
    std::cout << "加法结果: " << add(5, 3) << std::endl;
    
    std::vector<double> nums = {1.5, 2.5, 3.5};
    std::cout << "平均值: " << calculateAverage(nums) << std::endl;
    
    Student student("张三", 20);
    student.introduce();
    
    std::cout << "最大值: " << max(10, 20) << std::endl;
    std::cout << "最大值: " << max(3.14, 2.71) << std::endl;
    
    smartPointersDemo();
    lambdaDemo();
    exceptionHandling();
    stlDemo();
    
    return 0;
}
```
- 注意事项：关键语法要点、常用模式、最佳实践

## 3. 常见用法
- 场景1：快速语法参考卡片
```cpp
// === 快速参考卡片 ===

// 变量声明和初始化
int x = 10;                    // 直接初始化
auto y = 3.14;                 // 类型推导
const int MAX_SIZE = 100;      // 常量

// 控制流
if (condition) { }             // 条件判断
for (int i=0; i<n; i++) { }    // 传统for循环
for (auto item : container) { } // 范围for循环
while (condition) { }          // while循环

// 函数定义
returnType funcName(params) { } // 函数声明
[](params) { body }            // lambda表达式

// 类定义
class ClassName {
    accessSpecifier:           // public/private/protected
    members;                   // 数据成员和成员函数
};

// 智能指针
std::unique_ptr<T> ptr;        // 独占所有权
std::shared_ptr<T> ptr;        // 共享所有权
std::weak_ptr<T> ptr;          // 弱引用

// 异常处理
try { riskyCode(); }           // 尝试执行
catch (ExceptionType& e) { }   // 捕获特定异常
catch (...) { }                // 捕获所有异常
```

- 场景2：常用STL容器和算法速查
```cpp
// === STL速查表 ===

// 序列容器
std::vector<T> vec;           // 动态数组
std::list<T> lst;             // 双向链表
std::deque<T> deq;            // 双端队列

// 关联容器
std::map<K, V> mp;            // 有序映射
std::unordered_map<K, V> ump; // 哈希映射
std::set<T> st;               // 有序集合
std::unordered_set<T> ust;     // 哈希集合

// 常用算法
std::sort(begin, end);        // 排序
std::find(begin, end, val);   // 查找
std::count(begin, end, val);  // 计数
std::copy(src_b, src_e, dst); // 复制
std::transform(in_b, in_e, out, op); // 转换

// 函数对象和lambda
std::greater<T>()             // 大于比较器
std::less<T>()                // 小于比较器
[](auto x) { return x*2; }    // 双倍lambda
```

## 4. 易错点/坑
- 错误示例：
```cpp
// 忘记包含必要的头文件
// #include <vector>  // 忘记包含
std::vector<int> vec;  // 编译错误
```
- 原因：缺少必要的头文件声明
- 修正方案：总是包含所需的头文件

- 错误示例：
```cpp
// 使用错误的迭代器
std::vector<int> vec = {1, 2, 3};
// auto it = vec.end();
// it++;  // 未定义行为
```
- 原因：对end()迭代器进行递增操作
- 修正方案：正确使用迭代器范围

## 5. 拓展补充
- 关联知识点：C++标准演进、编译器特性、平台差异
- 进阶延伸：模板元编程、并发编程、性能优化、现代C++特性