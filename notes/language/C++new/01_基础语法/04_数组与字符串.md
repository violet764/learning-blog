# 数组与字符串

## 1. 核心概念

### 定义
- **数组**：相同类型元素的连续内存集合
- **字符串**：字符序列，C风格字符串以'\0'结尾
- **下标**：访问数组元素的索引（从0开始）
- **长度**：数组或字符串中元素的数量

### 关键特性
- **连续存储**：数组元素在内存中连续存放
- **固定大小**：数组大小在编译时确定
- **随机访问**：通过下标直接访问任意元素
- **类型安全**：数组元素必须是相同类型

## 2. 语法规则

### 基本语法
```cpp
数据类型 数组名[大小];                    // 数组声明
数据类型 数组名[大小] = {初始值列表};     // 数组初始化

char 字符串名[大小];                      // C风格字符串
string 字符串对象名;                      // C++字符串对象
```

### 代码示例
```cpp
#include <iostream>
#include <string>  // 包含string头文件
using namespace std;

int main() {
    // 数组声明和初始化
    int numbers[5] = {1, 2, 3, 4, 5};          // 整型数组
    double scores[] = {85.5, 90.0, 78.5};      // 自动推断大小
    char vowels[5] = {'a', 'e', 'i', 'o', 'u'};
    
    // 访问数组元素
    cout << "第一个数字: " << numbers[0] << endl;     // 输出1
    cout << "第三个分数: " << scores[2] << endl;      // 输出78.5
    
    // 修改数组元素
    numbers[0] = 10;
    cout << "修改后第一个数字: " << numbers[0] << endl;
    
    // C风格字符串
    char greeting[20] = "Hello, World!";
    cout << "C风格字符串: " << greeting << endl;
    
    // C++字符串对象
    string message = "Welcome to C++";
    cout << "C++字符串: " << message << endl;
    
    // 字符串操作
    string name = "Alice";
    string welcome = "Hello, " + name + "!";
    cout << welcome << endl;
    
    return 0;
}
```

### 注意事项
- 数组下标从0开始，不是1
- 数组大小必须是常量表达式
- 字符串以空字符'\0'结尾
- 防止数组越界访问

## 3. 常见用法

### 场景1：数组遍历
```cpp
// 使用for循环遍历数组
int arr[] = {10, 20, 30, 40, 50};
int size = sizeof(arr) / sizeof(arr[0]);  // 计算数组大小

cout << "数组元素: ";
for (int i = 0; i < size; i++) {
    cout << arr[i] << " ";
}
cout << endl;

// 使用范围for循环（C++11）
cout << "范围for循环: ";
for (int num : arr) {
    cout << num << " ";
}
cout << endl;
```

### 场景2：多维数组
```cpp
// 二维数组：3行4列
int matrix[3][4] = {
    {1, 2, 3, 4},
    {5, 6, 7, 8},
    {9, 10, 11, 12}
};

// 遍历二维数组
cout << "二维数组:" << endl;
for (int i = 0; i < 3; i++) {
    for (int j = 0; j < 4; j++) {
        cout << matrix[i][j] << "\t";
    }
    cout << endl;
}
```

### 场景3：字符串操作
```cpp
string str1 = "Hello";
string str2 = "World";

// 字符串连接
string combined = str1 + " " + str2;
cout << "连接结果: " << combined << endl;

// 字符串长度
cout << "字符串长度: " << combined.length() << endl;

// 子字符串
string sub = combined.substr(0, 5);  // 从位置0开始，取5个字符
cout << "子字符串: " << sub << endl;

// 查找
size_t pos = combined.find("World");
if (pos != string::npos) {
    cout << "找到'World'在位置: " << pos << endl;
}

// 替换
combined.replace(6, 5, "C++");  // 从位置6开始，替换5个字符
cout << "替换后: " << combined << endl;
```

## 4. 易错点/坑

### 错误示例1：数组越界
```cpp
int arr[5] = {1, 2, 3, 4, 5};
cout << arr[5] << endl;  // 越界访问！
```
**原因**：数组下标从0到4，arr[5]访问了无效内存
**修正方案**：
```cpp
int arr[5] = {1, 2, 3, 4, 5};
for (int i = 0; i < 5; i++) {  // 确保下标在有效范围内
    cout << arr[i] << " ";
}
```

### 错误示例2：字符串未正确终止
```cpp
char str[5] = {'H', 'e', 'l', 'l', 'o'};  // 没有空间放'\0'
cout << str << endl;  // 可能输出乱码
```
**原因**：C风格字符串必须以'\0'结尾
**修正方案**：
```cpp
char str[6] = {'H', 'e', 'l', 'l', 'o', '\0'};
// 或者更简单的方式
char str2[] = "Hello";  // 编译器自动添加'\0'
cout << str2 << endl;
```

### 错误示例3：字符串比较错误
```cpp
char str1[] = "hello";
char str2[] = "hello";
if (str1 == str2) {  // 比较的是地址，不是内容
    cout << "相等" << endl;
} else {
    cout << "不相等" << endl;  // 总是输出这个
}
```
**原因**：数组名是地址，直接比较的是内存地址
**修正方案**：
```cpp
char str1[] = "hello";
char str2[] = "hello";
// 使用strcmp函数比较内容
if (strcmp(str1, str2) == 0) {
    cout << "相等" << endl;
}

// 或者使用C++字符串
string s1 = "hello";
string s2 = "hello";
if (s1 == s2) {  // string类重载了==运算符
    cout << "相等" << endl;
}
```

## 5. 拓展补充

### 关联知识点
- **指针**：数组名本质是指向第一个元素的指针
- **动态数组**：使用new和delete的动态内存分配
- **向量(vector)**：C++标准库的动态数组容器
- **字符编码**：ASCII、UTF-8等字符表示方式

### 进阶延伸
- **std::array**：C++11引入的现代固定大小数组
- **std::vector**：动态大小的数组容器
- **字符串流**：使用stringstream进行字符串处理
- **正则表达式**：C++11引入的复杂模式匹配