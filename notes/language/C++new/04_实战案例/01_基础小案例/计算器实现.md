# 计算器实现

## 1. 核心概念
- 定义：实现一个能够进行基本算术运算的简单计算器程序
- 关键特性：支持加减乘除运算、用户交互、错误处理

## 2. 语法规则
- 基本语法：使用C++基本输入输出、条件判断、函数封装
- 代码示例：
```cpp
#include <iostream>
#include <limits>

// 函数声明
double add(double a, double b);
double subtract(double a, double b);
double multiply(double a, double b);
double divide(double a, double b);

int main() {
    double num1, num2;
    char operation;
    
    std::cout << "简单计算器" << std::endl;
    std::cout << "请输入第一个数字: ";
    std::cin >> num1;
    
    std::cout << "请输入运算符 (+, -, *, /): ";
    std::cin >> operation;
    
    std::cout << "请输入第二个数字: ";
    std::cin >> num2;
    
    double result;
    switch (operation) {
        case '+':
            result = add(num1, num2);
            break;
        case '-':
            result = subtract(num1, num2);
            break;
        case '*':
            result = multiply(num1, num2);
            break;
        case '/':
            if (num2 != 0) {
                result = divide(num1, num2);
            } else {
                std::cout << "错误：除数不能为零！" << std::endl;
                return 1;
            }
            break;
        default:
            std::cout << "错误：无效的运算符！" << std::endl;
            return 1;
    }
    
    std::cout << "结果: " << num1 << " " << operation << " " << num2 << " = " << result << std::endl;
    return 0;
}

// 函数定义
double add(double a, double b) {
    return a + b;
}

double subtract(double a, double b) {
    return a - b;
}

double multiply(double a, double b) {
    return a * b;
}

double divide(double a, double b) {
    return a / b;
}
```
- 注意事项：输入验证、除数零检查、错误处理

## 3. 常见用法
- 场景1：基础算术运算
  - 实现基本的加减乘除功能
  - 适合初学者练习函数封装和条件判断

- 场景2：增强版计算器（支持连续运算）
```cpp
#include <iostream>
#include <string>

class Calculator {
private:
    double currentValue;
    
public:
    Calculator() : currentValue(0) {}
    
    void add(double value) { currentValue += value; }
    void subtract(double value) { currentValue -= value; }
    void multiply(double value) { currentValue *= value; }
    void divide(double value) { 
        if (value != 0) {
            currentValue /= value;
        } else {
            std::cout << "错误：除数不能为零！" << std::endl;
        }
    }
    
    double getValue() const { return currentValue; }
    void clear() { currentValue = 0; }
};

int main() {
    Calculator calc;
    std::string input;
    
    std::cout << "增强版计算器（输入'quit'退出）" << std::endl;
    
    while (true) {
        std::cout << "当前值: " << calc.getValue() << std::endl;
        std::cout << "请输入操作 (+, -, *, /, clear, quit): ";
        std::cin >> input;
        
        if (input == "quit") break;
        if (input == "clear") {
            calc.clear();
            continue;
        }
        
        double value;
        std::cout << "请输入数值: ";
        std::cin >> value;
        
        if (input == "+") calc.add(value);
        else if (input == "-") calc.subtract(value);
        else if (input == "*") calc.multiply(value);
        else if (input == "/") calc.divide(value);
        else std::cout << "无效操作！" << std::endl;
    }
    
    return 0;
}
```

## 4. 易错点/坑
- 错误示例：
```cpp
// 不检查除数是否为零
double divide(double a, double b) {
    return a / b;  // 当b=0时程序崩溃
}
```
- 原因：缺乏输入验证和错误处理
- 修正方案：添加除数零检查，使用异常处理或错误代码

- 错误示例：
```cpp
// 输入类型不匹配
int num;
std::cin >> num;  // 如果用户输入字母，程序进入错误状态
```
- 原因：未处理输入流错误状态
- 修正方案：检查输入流状态，清除错误标志

## 5. 拓展补充
- 关联知识点：函数封装、类与对象、输入输出流、异常处理
- 进阶延伸：支持科学计算、历史记录、图形界面、表达式解析