# Vim 

Vim 是一个**多模态编辑器**，基于以下核心理念：
- 编程时大部分时间花在阅读/编辑而非写代码上
- 不同操作模式对应不同活动（插入文字 vs 操纵文字）
- 避免使用鼠标和方向键，提高效率
- 界面本身就是编程语言：命令可组合

## 操作模式

Vim 具有多种操作模式：

| 模式 | 进入方式 | 用途 |
|------|----------|------|
| **正常模式** | 默认/按 `<ESC>` | 移动光标和修改 |
| **插入模式** | 按 `i` | 插入文本 |
| **替换模式** | 按 `R` | 替换文本 |
| **可视化模式** | 按 `v`（一般）`V`（行）`Ctrl+v`（块） | 选中文本块 |
| **命令模式** | 按 `:` | 执行命令 |

**提示**：频繁使用 `<ESC>` 返回正常模式，可考虑重映射 CapsLock 为 ESC。

## 基本操作

**插入文本**
- 正常模式下按 `i` 进入插入模式
- 按 `<ESC>` 返回正常模式

**文件操作（命令模式）**
| 命令 | 用途 |
|------|----------|
| `:q` | 退出 |
| `:w` | 保存 |
| `:wq` | 保存并退出 |
| `:e 文件名` | 打开文件 |
| `:ls` | 显示打开缓存 |
| `:help 主题` | 显示主题帮助 |


## 移动
多数时候你会在**正常模式**下，使用移动命令在缓存中导航。在 Vim 里面移动也被称为 “名词”， 因为它们指向文字块。

| 移动类型       | 命令及格式                | 功能描述                                  |
|----------------|---------------------------|-------------------------------------------|
| 基本移动       | `h`                       | 向左移动                                  |
|                | `j`                       | 向下移动                                  |
|                | `k`                       | 向上移动                                  |
|                | `l`                       | 向右移动                                  |
| 词级移动       | `w`                       | 跳转到下一个词的开头                      |
|                | `b`                       | 跳转到当前词/上一个词的开头                |
|                | `e`                       | 跳转到当前词/下一个词的结尾                |
| 行内移动       | `0`                       | 跳转到行首                                |
|                | `^`                       | 跳转到行内第一个非空格字符                |
|                | `$`                       | 跳转到行尾                                |
| 屏幕内移动     | `H`                       | 跳转到屏幕首行                            |
|                | `M`                       | 跳转到屏幕中间行                          |
|                | `L`                       | 跳转到屏幕底部行                          |
| 翻页移动       | `Ctrl-u`                  | 向上翻页                                  |
|                | `Ctrl-d`                  | 向下翻页                                  |
| 文件级移动     | `gg`                      | 跳转到文件开头                            |
|                | `G`                       | 跳转到文件结尾                            |
| 按行数移动     | `:{行数}<CR>` 或 `{行数}G` | 跳转到指定行数（{行数}替换为具体数字）    |
| 配对查找移动   | `%`                       | 找到配对内容（如括号、/* */注释对）        |
| 行内字符查找   | `f{字符}`                 | 向前查找本行指定字符并跳转到该字符位置    |
|                | `t{字符}`                 | 向前查找本行指定字符并跳转到该字符前一位  |
|                | `F{字符}`                 | 向后查找本行指定字符并跳转到该字符位置    |
|                | `T{字符}`                 | 向后查找本行指定字符并跳转到该字符后一位  |
| 查找导航       | `,`                       | 跳转到上一个匹配的字符位置                |
|                | `;`                       | 跳转到下一个匹配的字符位置                |
| 正则搜索移动   | `/{正则表达式}`           | 向后搜索符合正则表达式的内容              |
|                | `n`                       | 跳转到下一个搜索匹配结果                  |
|                | `N`                       | 跳转到上一个搜索匹配结果                  |

##  选择
在 Vim 中选中字符（可视化模式）是编辑的核心操作，主要通过可视化模式实现，分为「字符级、行级、块级」三种模式，搭配移动命令即可精准选中内容

| 模式类型 | 快捷键 | 作用 |
|----------|--------|------|
| 字符级 | `v` | 按字符选中 |
| 行级 | `V` | 按行选中 |
| 块级 | `Ctrl+v` | 按块选中 |

## 编辑
所有你需要用鼠标做的事， 你现在都可以用键盘：采用编辑命令和移动命令的组合来完成。 这就是 Vim 的界面开始看起来像一个程序语言的时候。Vim 的编辑命令也被称为 “动词”， 因为动词可以施动于名词。

| 命令及格式          | 功能描述                                  | 示例说明                                  |
|---------------------|-------------------------------------------|-------------------------------------------|
| `i`                 | 进入插入模式                              | -                                         |
| `O`                 | 在当前行之上插入新行并进入插入模式        | -                                         |
| `o`                 | 在当前行之下插入新行并进入插入模式        | -                                         |
| `d{移动命令}`       | 删除 `{移动命令}` 所指定的文本内容        | `dw` 删除词，`d$` 删除到行尾，`d0` 删除到行头 |
| `c{移动命令}`       | 改变 `{移动命令}` 所指定的文本（删除后进入插入模式） | `cw` 改变词（等同于 `dw` 后按 `i`）        |
| `x`                 | 删除光标所在字符                          | 等同于 `dl`                               |
| `s`                 | 替换光标所在字符（删除后进入插入模式）    | 等同于 `xi`                               |
| 可视化模式 + `d`    | 选中文字后删除选中内容                    | -                                         |
| 可视化模式 + `c`    | 选中文字后改变选中内容（删除后进入插入模式） | -                                         |
| `u`                 | 撤销上一步操作                            | -                                         |
| `<C-r>`             | 重做被撤销的操作                          | -                                         |
| `y`                 | 复制（提取）文本内容                      | 部分命令（如 `d`）执行时会同步复制内容     |
| `p`                 | 粘贴复制的文本内容                        | -                                         |
| `~`                 | 改变光标所在字符的大小写                  | -                                         |


## 计数
你可以用一个计数来结合“名词”和“动词”，这会执行指定操作若干次
```vim
3w    " 向后移动3个词
5j    " 向下移动5行
7dw   " 删除7个词
```

## 修饰语
你可以用修饰语改变“名词”的意义。修饰语有 `i`，表示“内部”或者“在内”，和 `a`， 表示“周围”。
```vim
ci(   " 改变当前括号内的内容
ci[   " 改变当前方括号内的内容
da'   " 删除单引号字符串（包括引号）
```

## 高级功能

**搜索替换**
```vim
:s（替换）命令
 - %s/foo/bar/g          " 全局替换foo为bar
 - %s/\[.*\](\(.*\))/\1/g " Markdown链接转简单URL
```

**多窗口操作**
```vim
:sp    " 水平分割窗口
:vsp   " 垂直分割窗口
```


::: tip
当感觉"应该有更好的方法"时，立即搜索学习，Vim 几乎总有更高效的解决方案。
:::
